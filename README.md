# Incidents Processor System

This is web application implemented using Spring Boot. This application processes daily incidents delivered in .csv file
and generates statistics report. This application is capable of handling very large datasets.

## Functionality

This application contains batch job which runs daily at 4:00 am EST. Batch job takes incidents file as input and
produces report in csv format. Input file name/location is configurable and can be modified by changing value of
property _incidents.input.file_ in _application.yml_. Input file contains data in below format:

    <Asset Name>; <Start Time>; <End Time>; <Severity>

Default field separator is ; but it can be changed by changing value of property _incidents.record.separator_.

Above job generates incident statistics report in csv format. The file name/location is configurable and can be modified
by changing value of property _incidents.output.file_. Report contains below data separated by same field separator used
in input file.

    <Asset Name>; <Total Incidents>;<Total Uptime>, <Total Downtime (in %)>; <Rating>

This application also exposes below endpoint to get/fetch report generated by above job.

**GET : /incidentprocessor/v1/statistics**

`Above endpoint returns incident statistics report file in csv format. We can simply hit this service from any browser to download the report. If report is not yet generated on that day, it will launch report generator job in separate thread to create report. Once job is complete, it will return the report.`

## System Design

Application is built using Spring Boot and Java 11. Maven is used for building the application.

This application can be divided in two parts, one is batch job and another is REST endpoint/s. I have used spring-batch
for implementing batch job.

While implementing this functionality, I followed TDD approach and that is why code coverage is above 90%.

## How to Run Application

1. Clone this repository by executing below command

        git clone https://github.com/spote87/incident-processor.git

2. Go to directory where you have checked out code and run below commands

        mvn clean install

        mvn spring-boot:run
   Second command will launch application. Once application is started, you can access it using below URL:

        http://localhost:8080//incidentprocessor/v1/

**Note**: If port 8080 is already being used on your machine, please change value of _**server.port**_ in _
src/main/resources/application.properties_ to something else and try again.

You can access above REST service/s like below

        http://localhost:8080//incidentprocessor/v1/statistics
                        
